#include<iostream>
#include<time.h>
#include<cstdio>
#include<algorithm>
#include<vector>
#include<set>
#include<cmath>
#include "TimeBloomFilter.h"

using namespace std;

BloomFilterCell B;
TimeBloomFilter TM(1024,4);
set<int> s;
int main(){
    srand(time(NULL));
    int test_number=12300985;
    TM.insert(test_number);
    TM.set_hashtype(1);
    vector<int> hash = TM.get_hash(test_number);
    printf("hash into ->\n");
    for(int i=0;i<hash.size();i++)
        printf("%d ",hash[i]);
    puts("");
    for(int j=0;j<hash.size();j++){
        printf("%d -> %d %d\n",hash[j],TM.B[ hash[j] ].get_cnt(),TM.B[ hash[j] ].check_next());
    }
    puts(" last is origin \n");
    TM.insert(test_number);
    for(int i=0;i<100;i++){
        for(int j=0;j<hash.size();j++){
            printf("%d -> %d %d\n",hash[j],TM.B[ hash[j] ].get_cnt(),TM.B[ hash[j] ].check_next());
        }
        printf("enter to continue\n");
        getchar();
        TM.increase();
    }
    return 0;
}
